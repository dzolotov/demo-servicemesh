# TrafficSplit больше не поддерживается в современном Linkerd
# Canary deployment реализуется через два deployment с разными репликами
# payment-service-v1: 2 replicas (95% трафика) 
# payment-service-v2: 1 replica (5% трафика)
# Kubernetes Service автоматически распределяет нагрузку между ними

# Для более точного управления трафиком используйте HTTPRoute:
# apiVersion: gateway.networking.k8s.io/v1beta1
# kind: HTTPRoute
# metadata:
#   name: payment-route
#   namespace: e-commerce
# spec:
#   parentRefs:
#   - name: payment-service
#   rules:
#   - backendRefs:
#     - name: payment-service-v1
#       weight: 95
#     - name: payment-service-v2  
#       weight: 5